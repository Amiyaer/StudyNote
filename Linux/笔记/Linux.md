### 1.Linux的目录

#### 1.1目录结构

根目录为“/”

**==/==**

- /root
  - /root/Desktop
  - /root/Maildir
  - ......
- /bin
- /boot
- /dev
- /etc
- /home
- /var
- /lib
- /usr
  - /usr/bin
  - /usr/lib
  - ......
- /media
- ......

#### 1.2具体介绍

/bin(/usr/bin、/usr/local/bin)：是binary的缩写，存放最经常使用的==命令==。

/sbin(/usr/sbin、/usr/local/sbin)：s就是Super的意思，这里存放的是系统管理员使用的==系统管理程序==。

/home：存放普通用户的==主目录==，在Linux中每个用户都有一个自己的目录。

/root：存放系统管理员的用户主目录。

/boot：存放==启动==Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。

------

/proc：虚拟的目录，是==系统内存的映射==，访问这个目录可以获ls取系统信息。

/srv：service的缩写，存放一些服务启动之后需要==提取==的数据。

/sys：安装了2.6内核中新出现的一个==文件系统==。

[^IMPORTANT]: 以上三个文件夹一般不要去动。

------

/tmp：存放一些临时文件。

/dev：类似于windows的==设备管理器==，把所有的硬件用文件的形式存储。

/media：用于==挂载==linux识别的一些设备，例如U盘、光驱等。

/mnt：临时挂载别的文件系统，将外部的存储挂载在/mnt/上，进入该目录就可以查看里面的内容了。

/opt：给主机==额外安装软件==所摆放的目录。如Oracle数据库。

/usr/local：给另一个主机额外安装软件所摆放的目录。一般通过编译源码方式安装的程序。

/var：存放着在不断扩充的东西，习惯将经常被修改的目录放在这个目录下。包括各种日志文件。

/selinux[security-enhanced linux] 360：SELinux是一种安全子系统，它能控制程序只能访问特定文件。



### 2.vi和vim

vi：Linux系统内建的文本编辑器

vim：vi的增强版本，功能丰富

#### 2.1三种常见模式

1.正常模式：以vim打开一个档案就直接进入正常模式了。可以移动光标，删除字符或是整行，复制粘贴等操作(可以使用快捷键)。

2.插入模式：按下i，o，a，r等才会进入的模式，该模式下才可以输入内容进行编辑。

3.命令行模式：这个模式可以提供相关指令，完成读取、存盘、替换、离开vim、显示行号等功能。

插入模式转到一般模式：ESC键

一般模式转到命令行模式：冒号:或者斜杠/

命令行模式下保存并退出：输入``:wq``保存退出，``:q``退出，``:q!``强制退出不保存。

#### 2.2一些常用快捷键(正常模式)

- 拷贝当前行：yy，拷贝当前行向下的n行：nyy
- 粘贴当前行：p
- 删除当前行：dd，删除当前向下的n行用ndd
- 关键词查找：/进入命令行模式，输入关键字进行查找，查找到结果后按n把光标移动到下一个结果上。
- 设置/取消行号：:进入命令行模式，set nu设置行号，set nonu取消行号
- 编辑文件，使用快捷键到文件最末行[G]和首行[gg]
- 撤回动作：u
- 把光标移动到指定的行
  - 第一步：显示行号
  - 第二步：输入想到达的行的行号
  - 第三步：shift键+g



### 3.开机、重启和用户管理

#### 3.1关机和重启命令

shutdown -h now  ：表示立即关机

shutdown -h 1 ：表示一分钟后关机

shutdown -r now  ：表示立即重启

halt ：直接使用，效果等价于关机

reboot ：重启系统

sync ：把内存的数据同步到磁盘上(保存内容)

#### 3.2登录和注销

尽量少使用root账号进行登录。

用户的切换：su - 用户名。切换到新用户后输入exit就会返回到原来的用户。

用户的注销：命令行模式logout。该指令在图形运行级别无效，在运行级别3下有效。

#### 3.3用户管理

/home/目录下有各个用户的家目录，用户登录时，回自动切换到自己的家目录下。每个用户也都对于一个用户组。用户创建成功后，会自动创建和用户同名的家目录。

##### 3.3.1添加用户

基本语法

​	useradd  [一些可选项]  新用户名

​	useradd  -d  指定目录  新用户名

​    useradd  -g  指定组名  新用户名    `新增用户时直接上组`

​	指定/修改密码：passwd  用户名，输入这个命令后可以输入新的密码。

##### 3.3.2删除用户

基本语法

​	userdel  用户名：仅仅删除用户，保留家目录

​	userdel  -r  用户名：删除用户和家目录

在实际的工作中，建议保留家目录。

##### 3.3.3查询用户信息

基本语法

​    id  用户名

查看当前用户：woami

#### 3.4用户组

类似于角色，系统可以对有共性的多个用户进行统一的管理。

##### 3.4.1增加组

基本语法：groupadd  组名

##### 3.4.2删除组

基本语法：groupdel  组名

##### 3.4.3修改组

语法：usermod  -g  用户组  用户名

#### 3.5用户和组的相关文件

/etc/group组配置文件(组信息)

/etc/passwd用户配置文件(记录了用户的各种信息)

/etc/shadow口令配置文件(密码和登录信息，加密)



### 4.实用指令

#### 4.1指定运行级别

运行级别示意图

![](E:\new add juan\学习\Linux\笔记\pic\pic1.png)

切换运行级别：init  级别。

#### 4.2帮助指令

对某个指令不熟悉的时候，就可以使用linux提供的帮助指令来了解使用方法

##### 4.2.1man 获得帮助信息

man  命令或者配置文件

(获得帮助信息)

##### 4.2.2help 查看命令的用法

help 命令

#### 4.3文件目录类

##### 4.3.1pwd指令(查看当前目录)

显示当前工作目录的绝对路径

##### 4.3.2ls指令(显示目录或文件)

基本语法：ls  [选项]  [目录或是文件]

常用选项：-a(显示当前目录所有的文件和目录)，-l(以列表的方式显示信息)

##### 4.3.3cd指令(切换目录到指定目录)

基本语法：cd  [参数]

常用参数

​        cd~或者cd：回到自己的家目录

​        cd..：回到当前目录的上一级目录

##### 4.3.4mkdir指令

用于创建目录

基本语法：mkdir  [选项]  要创建的目录

常用选项：

​        -p：创建多级目录

如果没有-p就创建多级目录会报错。

##### 4.3.5rmdir指令

用于删除一个空目录，如果这个目录有内容，是无法删除的。

基本语法：rmdir  [选项]  要删除的空目录

如果要删除一个非空的目录，使用指令``rm -rf 要删除的目录``

##### 4.3.6touch指令

用于创建一个新文件

基本语法：touch  空文件名

一次性创建多个文件：把空文件名用空格隔开。

##### 4.3.7cp指令

用于拷贝文件到指定目录

基本语法：cp  [选项]  源文件  拷贝到的位置

常用选项：-r：递归赋值整个文件夹(拷贝整个目录)

```shell
案例：把当前目录下的a.txt文件拷贝到同文件夹下的b文件夹(相对路径)里
# cp a.txt b/
```

如果拷贝到的目录中有同名的文件或文件夹存在，会提示是否覆盖。如果不想要提示，可以把cp换成``\cp``来强制覆盖。

##### 4.3.8rm指令

用于移除文件或目录

基本语法：rm  [选项]  要删除的文件或目录

常用选项

​        -r：递归删除整个文件夹

​		-f：强制删除不提示

普通删除会有提示，加了-f则不会有提示而进行强制删除。

删除整个文件夹的时候会一个个文件夹的进去并且提示你是否删除，比较麻烦，一般可以-rf直接不提示删除。

##### 4.3.9mv指令

用于移动文件与目录，或者重命名

基本语法：

​		重命名：mv  原来文件的名字  文件的新名字

​		移动文件(会保留原先的文件名)：mv  某目录下的某文件  移动到的目录

##### 4.3.10cat指令

用于查看文件内容，只能查看不能修改

基本语法：cat  [选项]  查看的文件

常用选项：-n：显示行号

通常会和more(分页指令结合使用)：``cat命令 | more``

##### 4.3.11more指令

用于以全屏的方式，按页显示文本内容

基本语法：more  要查看的文件

页内操作：

| 操作   | 功能说名                             |
| ------ | ------------------------------------ |
| 空格键 | 向下翻一页                           |
| Enter  | 向下翻一行                           |
| q      | 代表立刻离开more，不再显示该文件内容 |
| Ctrl+F | 向下滚动一屏                         |
| Ctrl+B | 返回上一屏                           |
| =      | 输出当前行的行号                     |
| :f     | 输出文件名和当前行的行号             |

##### 4.3.12less指令

与more类似用于分屏查看文件内容，但是less支持显示各种终端。而且在显示文件内容时，并不是一次将整个文件加载后才显示，而是根据各种需要加载的内容，对于显示大型文件的效率较高。

基本语法：less  要查看的文件

页内操作：

| 操作       | 功能说名                                   |
| ---------- | ------------------------------------------ |
| 空格键     | 向下翻一页                                 |
| [pagedown] | 向下翻一页                                 |
| [pageup]   | 向上翻一页                                 |
| /字串      | 向下搜寻[字串]的功能，n向下查找，N向上查找 |
| ？字串     | 向上搜寻[字串]的功能，n向下查找，N向上查找 |
| q          | 离开less这个程序                           |

##### 4.3.13``>``指令和``>>``指令

```shell
>用于重定向，会将原来的文件内容覆盖
>>用于追加，不会覆盖原来文件的内容
基本语法
	ls -l>文件：ls -l指令显示出的列表的内容覆盖写入文件
	ls -al>>文件：列表的内容追加到文件的末尾
	cat 文件1>文件2：把文件1的内容覆盖到文件2
	echo "内容">>文件：把内容写入文件
```

##### 4.3.14echo指令

用于输出内容到控制台

基本语法：echo  [选项] 输出内容

```shell
#输出环境变量
echo $PATH
```

##### 4.3.15head指令

用于显示文件的开头内容，默认显示文件的前十行ps 

基本语法：head  [选项]  (数字)  文件

选项：-n  数字，查看指定行数的内容

##### 4.3.16tail指令

用于显示文件的尾部内容，默认显示文件的后十行

基本语法：tail  [选项]  (数字)  文件

选项：

​		-n  数字，查看指定行数的内容

​		-f，实时追踪文档的所有更新，如果有变化就会立刻变化

##### ==以上指令使用后Ctrl+c即可退出==

##### 4.3.17ln指令

用于给源文件创建快捷方式(软链接)

基本语法：ln  -s  [原文件或目录]  [软连接名]

会在当前的目录下创建软连接。

用pwd查看当前目录时，显示的是软链接的目录位置而不是指向的原文件的位置。

##### 4.3.18history指令

用于查看已经执行过的历史指令，也可以执行历史指令。

基本语法：

​		history  [n]，显示历史n条指令。

​		![n]，执行历史第n条指令。



#### 4.4时间日期类

##### 4.4.1date指令

###### 4.4.1.1用于显示当前日期

基本语法：

​		date：显示当前时间线信息

​		date  %Y：显示当前年份

​		date  %m：显示当前月份

​		date  %d：显示当前是那一天

​		date  "+%Y-%m-%d %H:%M:%S"：显示年月日时分秒，分隔符可以自定义，不一定要是-和：，但是+一定要加载开头

###### 4.4.1.2用于设置当前时间

基本语法：date  -s  字符串时间

如date -s "2018-10-10 11:22:22"，这里的字符串时间格式是确定的，即要使用-和:

##### cal4.4.2指令

用于查看日历

基本语法：cal  [选项]

选项里加年份可以显示一整年的日历，不加默认显示当前月份的日历



#### 4.5搜索查找类

##### 4.5.1find指令

用于从指定目录向下递归地遍历各个子目录，将满足条件的文件或者目录显示在终端。

基本语法：find  [搜索范围]  [选项]

搜索范围通常是某个文件目录下。

选项说明

| 选项             | 功能                                        |
| ---------------- | ------------------------------------------- |
| -name <查询方式> | 按照指定的文件名查找模式来查找文件          |
| -user <用户名>   | 查找属于指定用户名的所有文件                |
| -size <文件大小> | 按指定的文件大小查找文件，+n大于-n小于n等于 |

案例

find /home -name hello.txt：根据名称查找/home 目录下的 hello.txt 文件

find /opt -user nobody：查找/opt 目录下，用户名称为 nobody 的文件

find / -size +20M：查找整个 linux 系统下大于 20m 的文件

##### 4.5.2locate指令

用于快速定位文件的路径。

基本语法：locate  文件

特别说明：使用locate之前要先执行updatedb指令创建数据库。

##### 4.5.3grep指令和管道符号

grep指令用于过滤查找

管道符号"|"，表示将前一个命令的处理结果输出传递给后面的命令处理。

基本语法：grep  [选项]  查找内容  源文件  (在源文件中查找内容)

常用选项：

​		-n：显示行号

​		-i：忽略大小写

案例：在hello.txt  文件中，查找	"yes"	所在行，并且显示行号

``cat hello.txt | grep -n yes``

~~先用cat查看hello.txt的内容，再用grep直接在文件内查找，使用|可以不用源文件了。~~



#### 4.6压缩和解压缩类

##### 4.6.1gzip和gunzip指令

gzip用于压缩文件，gunzip用于解压缩文件

基本语法：

​		gzip  文件：只能压缩为gz文件(直接在文件拓展名后加.gz)

​		gunzip  文件：解压缩

压缩后不会保留原来的文件，只会保留压缩后的文件。

##### 4.6.2zip和unzip指令

zip用于压缩文件，unzip用于解压缩文件，这个在项目打包中很有用

基本语法：

​		zip  [选项]  XXX.zip  要压缩的内容

​		unzip  [选项]  XXX.zip

zip常用选项：-r：压缩整个目录

zip常用选项：-d  <目录>：指定解压后文件的存放目录

##### 4.6.3tar指令

打包指令，最后打包后的文件是tar.gz的文件

基本语法：tar  [选项]  XXX.tar.gz  打包的内容(打包目录，压缩后的文件格式为.tar.gz)

选项说明

| 选项 | 功能               |
| ---- | ------------------ |
| -c   | 产生.tar打包文件   |
| -v   | 显示详细信息       |
| -f   | 指定压缩后的文件名 |
| -z   | 打包同时压缩       |
| -x   | 解包.tar文件       |

案例：

1.压缩多个文件，将  /home/a1.txt 和  /home/a2.txt 压缩成a.tar.gz

tar  -zcvf  a.tar.gz  /home/a1.txt  /home/a2.txt  多个文件用空格隔开

2.将 myhome.tar.gz解压到 /opt/ 目录下

tar  -zxvf  myhome.tar.gz  -C  /opt/  解压到的目录事先要存在

压缩用-zcvf，解压用-zxvf，-C固定要加，不然可能会出错



### 5.组管理和权限管理

在 linux 中的每个用户必须属于一个组，不能独立于组外。在 linux 中每个文件有**所有者、所在组、其它组**、改变用户所在组的概念。

#### 5.1文件/目录的所有者

一般是文件的创建者。

##### 5.1.1查看文件的所有者和所在组

指令：ls  -ahl(h：human)

##### 5.1.2改变文件的所有者

指令：

​		chown  [选项]  新的用户名  文件名

​		chown  [选项]  新用户名:新组名  文件名  (改变用户的所有者和所有组)

选项：-R：如果是目录，则使其下所有子文件或目录递归生效

#### 5.2文件/目录所在组

某个用户创建了文件后，默认这个文件的所在组就是该用户的所在组。

##### 5.2.1修改文件的所在组

指令：chgrp  [选项]  组名  文件名

选项：-R：如果是目录，则使其下所有子文件或目录递归生效

#### 5.3其他组

除了文件的所有者和所在组的用户外，系统的其他用户都是文件的其他组。

##### 5.3.1改变用户的所在组

需要root权限

指令：

​		usermod  -g  组名  用户名

​		usermod  -d  目录名  用户名 (改变用户登录的初始目录)



#### 5.4权限管理

##### 5.4.1基本介绍

ls	-l 中显示的内容如下：

**-rwxrw-r--**1 root root 1213 Feb 2 09:39 abc

0-9 位说明

第 0 位确定文件类型(d, - , l , c , b)

第 1-3 位确定==所有者==（该文件的所有者）拥有该文件的权限。---User

第 4-6 位确定==所属组==（同用户组的）拥有该文件的权限，---Group

第 7-9 位确定==其他用户==拥有该文件的权限 ---Other

可用数字表示为: r=4,w=2,x=1  因此 rwx=4+2+1=7

往后按顺序分别是：文件的硬链接数/(目录的子目录数)、所属用户、所在组、文件大小(目录固定为4096)、最后修改日期、文件名。

###### 5.4.1.1rwx 作用到文件

[r]代表可读(read):  可以读取,查看

[w]代表可写(write): 可以修改,但是不代表可以删除该文件,删除一个文件的前提条件是对该文件所在的目录有写权限，才能删除该文件.

[x]代表可执行(execute):可以被执行

###### 5.4.1.2rwx 作用到目录

[r]代表可读(read):  可以读取，ls 查看目录内容

[w]代表可写(write):  可以修改,目录内创建+删除+重命名目录

[x]代表可执行(execute):可以进入该目录

==**要想进入一个用户的文件夹查看某文件，需要rx两种权限。r用于读取，x用于进入文件夹(执行文件夹才能进入)**==



#### 5.5权限管理

##### 5.5.1修改权限

指令：(u:所有者	g:所有组	o:其他人	a:所有人(u、g、o 的总和))

​		chmod	u=rwx,g=rx,o=x	文件/目录名

​		chmod	o+w	文件/目录名

​		chmod	a-x	文件/目录名

或者也可以通过数字变更权限

规则：r=4 w=2 x=1		rwx=4+2+1=7 

chmod u=rwx,g=rx,o=x  文件目录名相当于

chmod  751  文件目录名





### 6.任务调度

任务调度：是指系统在某个时间执行的特定的命令或程序。

任务调度分类：

​	1.系统工作：有些重要的工作必须周而复始地执行。如病毒扫描等

​	2.个别用户工作：个别用户可能希望执行某些程序，比如对 mysql 数据库的备份。

基本语法：crontab  [选项]

常用选项

​		-e：编辑crontab定时任务

​		-l：查询crontab任务

​		-r：删除当前用户所有的crontab任务

编辑完成保存退出之后，任务就会开始执行。

相关指令

1.crontab –r：终止任务调度(所有)

2.crontab –l：列出当前有那些任务调度

3.service crond restart：[重启任务调度]



#### 6.1简单案例

每小时的每分钟执行 ls –l /etc/ >> /tmp/to.txt 命令

1) crontab -e

2) */1 * * * * ls -l /etc >> /tmp/to.txt

3) 当保存退出后就程序。

4) 在每一分钟都会自动的调用 ls -l /etc >> /tmp/to.txt

##### 6.1.1参数说明

![](E:\new add juan\学习\Linux\笔记\pic\pic2.png)

![](E:\new add juan\学习\Linux\笔记\pic\pic3.png)





### 7.磁盘分区、挂载

分区的方式：mbr分区和gtb分区

Linux分区

1) Linux 来说无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构 , Linux 中每个分区都是用来组成整个文件系统的一部分。

2) Linux 采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录， 且将一个分区和一个目录联系起来。这时要载入的一个分区将使它的存储空间在一个目录下获得。

3)示意图

![](E:\new add juan\学习\Linux\笔记\pic\pic4.png)

Linux的硬盘说明

1) Linux 硬盘分 IDE 硬盘和 SCSI 硬盘，目前基本上是 SCSI 硬盘

2)对于 IDE 硬盘，驱动器标识符为“hdx~”,其中“hd”表明分区所在设备的类型，这里是指 IDE 硬盘了。“x”为盘号（a 为基本盘，b 为基本从属盘，c 为辅助主盘，d 为辅助从属盘）,“~”代表分区，前四个分区用数字 1 到 4 表示，它们是主分区或扩展分区，从 5 开始就是逻辑分区。例，hda3 表示为第一个 IDE 硬盘上的第三个主分区或扩展分区,hdb2 表示为第二个 IDE 硬盘上的第二个主分区或扩展分区。

3)对于 SCSI 硬盘则标识为“sdx~”，SCSI 硬盘是用“sd”来表示分区所在设备的类型的，其余则和 IDE 硬盘的表示方法一样。





### 8.进程管理

指令：ps –aux|grep xxx ，比如我看看有没有 sshd 服务

-a：显示当前终端的所有进程信息

-u：以用户的格式显示进程信息

-x：显示后台进程运行的参数

• ps -ef 是以全格式显示当前所有的进程

-e 显示所有进程。-f 全格式。

![](E:\new add juan\学习\Linux\笔记\pic\pic5.png)

 指令说明

• System V 展示风格

• USER：用户名称

• PID：进程号

• %CPU：进程占用 CPU 的百分比

• %MEM：进程占用物理内存的百分比

• VSZ：进程占用的虚拟内存大小（单位：KB）

• RSS：进程占用的物理内存大小（单位：KB）

• TT：终端名称,缩写

• STAT：进程状态，其中 S-睡眠，s-表示该进程是会话的先导进程，N-表示进程拥有比普通优先级更低的优先级，R-正在运行，D-短期等待，Z-僵死进程，T-被跟踪或者被停止等等

• STARTED：进程的启动时间

• TIME：CPU 时间，即进程使用 CPU 的总时间

• COMMAND：启动进程所用的命令和参数，如果过长会被截断显示

• UID：用户 ID

• PID：进程 ID

• PPID：父进程 ID

• C：CPU 用于计算执行优先级的因子。数值越大，表明进程是 CPU 密集型运算，执行优先级会降低；数值越小，表明进程是 I/O 密集型运算，执行优先级会提高

• STIME：进程启动的时间

• TTY：完整的终端名称

• TIME：CPU 时间

• CMD：启动进程所用的命令和参数

#### 8.1终止进程kill和killall

基本语法

​		kill  [选项]  进程号：通过进程号杀死进程

​		killall  进程名称：通过进程名称杀死进程，支持通配符，这在系统因负载过大而变得很慢时很有用。

常用选项：-9表示强迫进程停止(kill终端等)



#### 8.2 查看进程树

指令：pstree [选项]

选项

​		-p：显示进程PID

​		-u：显示进程的所属用户



#### 8.3服务管理

































